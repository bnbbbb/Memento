# Memento FastAPI 과제

# 단축 URL 서비스 구현

## 개요
URL 단축 서비스는 긴 URL을 Base62를 사용해 6글자로 단축된 URL을 사용하여 원본 URL로 리디렉션하는 기능을 제공합니다.
> 사람이 한 번에 기억할 수 있는 글자 수는 7개 전후이다 라는 밀러의 법칙을 적용해 6글자로 선택했습니다.

## 주요기능

### 1. 단축 URL 생성
- **엔드포인트**: `POST /shorten`
- **요청 본문**: `{"url": "<original_url>"}`
- **응답 본문**: `{"short_url": "<shortened_url>"}`

    - Base64를 사용하게 됐을 때는 +, /, = 를 url 형식에 사용할 수 없기 때문에 base62를 사용하게 되었습니다. 
    - short_url을 생성하는 과정에서 중복이 있을 수 있으니 효율성을 위해 무한 반복으로 될 때 까지 진행하지 않고 10을 max로 두어 진행하게 하였습니다.
    - 만료일자는 기본 10일에 숫자를 입력하면 날짜로 계산하여 +1일, +2일... 등으로 진행하였습니다.
    - apscheduler을 사용해서 만료기한이 지나게 되면 1day를 기준으로 자동 삭제되게 하였습니다. 


### 2. 원본 URL 리디렉션
- **엔드포인트**: `GET /<short_key>`
- **응답**:
  - 키가 존재하면 301 상태 코드로 원본 URL로 리디렉션.
  - 키가 존재하지 않으면 404 상태 코드로 오류 메시지 반환.
    - 방문하게 되면 visit_count를 증가시켜 조회수형식으로 만들었습니다.
    - RedirectResponse을 사용하여 원본URL로 이동하게 하였습니다.

> 조회수
- GET /stats/<short_key>로 확인할 수 있습니다.
- URL - Statistics 간의 관계는 일대일(1:1) 입니다.
- 각 URL 레코드는 정확히 하나의 Statistics 레코드와 연결됩니다.
- 각 Statistics 레코드는 정확히 하나의 URL 레코드와 연결됩니다.

### 데이터베이스
- **데이터베이스**: 원본 URL과 단축 키 매핑을 저장하기 위해 PostgreSQL 사용.
    > PostgreSQL 사용 이유
    - URL 단축 서비스에서는 데이터 무결성이 중요하다 생각해 트랜잭션의 ACID를 고수할 수 있는 PostgreSQL을 선택하게 되었습니다. 

- **문서화**: Swagger 문서 자동 생성.


### 프로젝트 실행 및 설치

> 요구사항
- python 3.7 이상
- PostgreSQL 설치
- VS Code

> 실행 방법
1. 